# item 19. knowledge를 반복하여 사용하지 말라

### knowledge

프로그래밍에서 knowledge란 넓은 의미로 의도적인 정보를 뜻함. knowledge는 코드 또는 데이터로 표현할 수 있음. 

상속을 하는데도 불구하고 특정 메서드를 오버라이드하지 않게 강제하는 경우 → 해당 메서드가 슈퍼 클래스와 동일하게 동작하기 원한다는 의미임. 

우리 프로그램에서 중요한 knowledge는 크게 두 개가 있음.

- 로직: 프로그램이 어떠한 식으로 동작하는지와 프로그램이 어떻게 보이는지
- 공통 알고리즘: 원하는 동작을 하기 위한 알고리즘

비즈니스 로직은 시간이 지나면서 계속 변하지만, 공통 알고리즘은 한 번 정의된 이후에는 크게 변하지 않음. 

<br/>

### knowledge의 반복

프로그램을 구현할 때 가장 주의해야 될 부분은 knowledge가 반복되고 있는 부분임. 이 반복되고 있는 부분을 수정해야 될 일이 생겼을 때 하나하나 다 변경을 해야하므로 실수가 나오기 쉬움. 따라서 knowledge의 반복은 프로젝트의 확장성을 막고 fragile하게 만듦. → 여러 종류의 추상화를 통해 반복을 줄일 수 있음. 

### knowledge의 반복을 해야 하는 상황?

다른 knowledge를 나타내고 있는 경우에는 추출하면 안 됨. 신중하지 못한 추출은 변경을 더 어렵게 만듦. 따라서 두 코드가 같은 knowledge를 나타내고 있는지 다른 knowledge를 나타내는지는 함께 변경될 가능성이 높은가 or 따로 변경될 가능성이 높은가 라는 질문으로 어느정도 결정할 수 있음. 한 가지 유용한 또 다른 방법으로는 이 비즈니스 규칙이 다른 곳(source)에서 왔는지 확인하는 방법이 있음. 다른 곳에서 온 로직이라면 독립적으로 변경될 가능성이 있음. 또한 잘못된 코드 추출로부터 우리를 보호할 수 있는 원칙이 있는데 그것이 바로 **단일 책임 원칙**(Single Repsponsibility Principle, SRP)임. 

> 한 가지 유용한 또 다른 방법으로는 이 비즈니스 규칙이 다른 곳(source)에서 왔는지 확인하는 방법이 있음. ← 이 부분이 이해가 가질 않아 스터디 시간에 질문했는데 결론적으로 기획 단위라고 생각하면 좋을듯. 비즈니스 로직이랑 비즈니스 규칙이랑은 다른 말임.
> 

<br/>

### SRP

단일 책임 원칙이란 클래스를 변경하는 이유는 단 한 가지여야 한다 라는 의미임. 즉 클래스를 구현할 때 처음부터 책임에 따라서 다른 클래스로 구분하여 만들어주어야 함. 

만약 a, b 클래스가 각각 다른 클래스이지만 a, b 인스턴스로 비슷한 일을 수행해주어야 할 때 이 헬퍼 함수를 어떻게 구현하면 좋을까?

- a, b에서 모두 사용하는 일반적인 public 함수로 헬퍼 함수를 만듦. 단 공통 부분은 두 곳에서 사용되므로 이를 함부로 수정해서는 안 됨.
- 헬퍼 함수를 각각의 a, b에 따라 2개 만듦.

<br/>

### SRP가 우리에게 알려주는 점

- 서로 다른 곳에서 사용하는 knowledge는 독립적으로 변경할 가능성이 높음. 따라서 비슷한 처리를 하더라도 완전히 다른 knowledge로 취급하는 것이 좋음.
- 다른 knowledge는 분리해 두는 것이 좋음. 그렇지 않으면 재사용해서는 안 되는 부분을 재사용하려는 유혹이 발생할 수 있음.
