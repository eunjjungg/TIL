# item 7. 결과 부족이 발생할 경우 null과 Failure를 사용하라

### 함수가 원하는 결과를 만들 수 없는 경우

- 서버로부터 데이터를 읽어들이려고 했는데 인터넷 연결 문제로 읽어 들이지 못한 경우
- 조건에 맞는 첫 번째 element를 찾으려고 했는데 조건에 맞는 element가 없는 경우
- 텍스트를 파싱해서 객체를 만드려고 했는데 텍스트의 형식이 맞지 않는 경우

```
📌
이러한 상황을 처리하는 매커니즘은 null 또는 실패를 나타내는 sealed class를 리턴하는 방식을 사용하거나 예외를 throw하면 됨.
그러나 전자 방식이 더 좋음.
```

<br/>

### 예외를 throw 하면 안 되는 이유

- 예외는 정보를 전달하는 방법으로 사용해서는 안 됨. 예외는 잘못된 특별한 상황을 나타내야 하며 처리되어야 함.
- 개발자가 예외가 전파되는 과정을 제대로 추적하지 못함.
- 코틀린의 모든 예외는 unchecked 예외로 사용자가 예외를 처리하지 않을 수도 있음.
- try-catch 블록 내부에 코드를 배치하면 컴파일러가 할 수 있는 최적화가 제한됨.

```
📌
따라서 충분히 예측할 수 있는 범위의 오류는 null과 Failure를 사용
예측하기 어려운 예외적인 범위의 오류는 예외를 throw 해서 처리하는 것이 좋음.
```

<br/>

### null과 Failure를 사용했을 때의 장점

- 이렇게 표시되는 오류는 다루기 쉬우며 놓치기 어려움.
    - 사용자는 null을 처리해야 한다면 safe call 또는 Elvis 연산자 같은 다양한 null safety 기능을 사용하기 때문.
    - union type을 리턴하기로 했다면 when 표현식을 사용해 이를 처리할 수 있으므로 놓치기가 어려워짐.
    - 추가적인 정보를 전달해야 한다면 sealed result class를 사용하는 것이 맞고, 그렇지 않다면 null을 사용하는 것이 일반적임. Failure는 처리할 때 필요한 정보를 가질 수 있음.
